{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>Importar libros de texto por nivel</h2>

    <form method="post" enctype="multipart/form-data" class="mt-3">
        {% csrf_token %}

        <div class="form-group">
            <label for="nivel">Selecciona nivel:</label>
            <select name="nivel" id="nivel" class="form-control" required>
                <option value="">-- Elige un nivel --</option>
                {% for n in niveles %}
                    <option value="{{ n.id }}">{{ n }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group mt-3">
            <label for="csv_libros">Archivo CSV de libros:</label>
            <input type="file" name="csv_libros" id="csv_libros" class="form-control-file" required>
        </div>

        <button type="submit" class="btn btn-success mt-3">Importar libros</button>
    </form>

    {% if resumen %}
        <hr>
        <h4>Resumen de la importaci√≥n:</h4>

        {% if resumen.nuevos %}
            <h5 class="text-success">Libros importados:</h5>
            <ul>
                {% for item in resumen.nuevos %}
                    <li>{{ item }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        {% if resumen.errores %}
            <h5 class="text-danger">Errores:</h5>
            <ul>
                {% for error in resumen.errores %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endif %}
</div>
{% endblock %}
